<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- crayons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/css/crayons-min.css" />
    <!-- Toastify -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <!-- external css -->
     <!-- <link rel="stylesheet" href="./assets/iparams.css" /> -->
    <script src="{{{appclient}}}"></script>
    <style>
        body{
            font-family:Open Sans,Helvetica Neue,sans-serif;
        }

        #show-signup-page{
            cursor: pointer;
            color:blue;
        }

        #login-btn-container, #signup-btn-container, .tab-validation-btn-container{
            display: flex;
            justify-content: center;
        }

        #signup-page{
            display: none;
        }  
        
        .font{
            font-family:Open Sans,Helvetica Neue,sans-serif;
        }

        #signup-btn{
            margin-left: 10px;
        }

        .password-icon{
            margin-left: 15px;
            cursor: pointer;
        }

    </style>
</head>

<body>
    <!-- toast -->
    <fw-toast id="toast-msg"></fw-toast>

    <!-- signup tab -->
    <div id="signup-page">
        <fw-tabs>
         <fw-tab slot="tab" panel="signup">Signup</fw-tab>
         <fw-tab-pannel name="signup">
            <br>
            <!-- username field -->
            <fw-input label="Username" icon-left="at-the-rate" hint-text="Create your konnector's ipaas username"
            warning-text="Username field should not be empty" 
            placeholder="eg: Mark1123" required clear-input id="signup-username">
             </fw-input>
            <br>
            <!-- email field -->
            <fw-input label="Email" icon-left="email" hint-text="Create your konnector's ipaas email"
            warning-text="email field should not be empty" error-text="Invalid email address" type="email"
            placeholder="eg: someone@example.com" required clear-input id="signup-email">
             </fw-input>
            <br>
            <!-- password field -->
            <fw-input label="Password" icon-left="password" hint-text="Create your konnector's ipaas password"
            warning-text="Password field should not be empty" type="password" 
            placeholder="eg: pass@w58ord" required clear-input id="signup-password">
             <fw-icon name="hidden" slot="input-suffix" id="signup-password-icon" class="password-icon"></fw-icon>
             </fw-input>
            <br>
            <!-- company name field -->
            <fw-input label="Company" icon-left="company" hint-text="Please enter your company name"
            warning-text="Company name field should not be empty"  
            placeholder="eg: konnectify" required clear-input id="signup-company">
             </fw-input>
            <br>
            <!-- phone number field -->
            <fw-input label="Phone" icon-left="phone" hint-text="Please enter your contact number with country code"
            warning-text="phone number field should not be empty" type="text" minlength="10" maxlength="10"
            placeholder="eg:+91 8975xxx579" required clear-input id="signup-phone">
             </fw-input>
            <br>
            <div id="signup-btn-container">
                <fw-button id="back-btn" color="secondary">
                    <!-- back button -->
                    <fw-icon name="arrow-left"></fw-icon>&nbsp; Back  
                 </fw-button>
                 <!-- signup button -->
                <fw-button id="signup-btn">Signup</fw-button>
            </div>
            <br>
         </fw-tab-pannel>
        </fw-tabs>
    </div>
    
       
    <!-- settings page tab -->
    <div id="settings-page">
        <fw-tabs id="settings-tab">
            <fw-tab slot="tab" panel="login" id="tab-1">Login/Signup</fw-tab>
            <!-- disabled="true" -->
            <fw-tab slot="tab" panel="freshservice"  id="tab-2">Connect Freshservice</fw-tab>
            <fw-tab slot="tab" panel="ukg" id="tab-3">Connect Ukg</fw-tab>
  
            <!-- login tab -->
            <fw-tab-panel name="login">
              <!-- login credentials -->
              <div id="login-container"> <br>
                <!-- email field -->
                <div id="input-container">
                    <fw-input label="Email" icon-left="at-the-rate" hint-text="Please enter your konnector's ipaas email"
                    warning-text="Email field should not be empty" type="email"
                    placeholder="eg: someone@example.com" required clear-input id="login-email">
                </fw-input>
            </div>
            <br>
            <!-- password field -->
            <div id="password-container">
                <fw-input label="Password" icon-left="password" hint-text="Please enter your konnector's ipaas password"
                warning-text="Password field should not be empty"  type="password" 
                placeholder="eg: pass@w58ord" required clear-input id="login-password">
                    <fw-icon name="hidden" slot="input-suffix" id="login-password-icon" class="password-icon"></fw-icon>
            </fw-input> 
        </div>
        <br>
        <!-- validate button -->
        <div id="login-btn-container">
            <fw-button color="primary" id="login-btn"> Login </fw-button>
        </div>
        <br>
        
        <div style="font-family:Open Sans,Helvetica Neue,sans-serif">
            <!-- <fw-button modal-trigger-id='modal-slider' id=""> Click here </fw-button> -->
            <span>Don't you have an account ? </span>
            <span id="show-signup-page">Click here!</span>
        </div>
        <br>
        </div>
            </fw-tab-panel>

            <!-- freshservice connection tab -->
            <fw-tab-panel name="freshservice">
                <div id="tab2-fields-container">

                </div>

                <div class="tab-validation-btn-container">
                    <fw-button id="tab2-validate-btn">validate</fw-button>
                </div>
            </fw-tab-panel>

            <!-- ukg connection tab -->
             <!-- app-freshservice/connection -->
            <fw-tab-panel name="ukg">
                <div id="tab3-fields-container">

                </div>
                

                <div class="tab-validation-btn-container">
                    <fw-button id="tab3-validate-btn">validate</fw-button>
                </div>
            </fw-tab-panel>
        </fw-tabs>
    </div>
   
         <!-- iparams script file  -->
         <script src="./assets/scripts/iparams.js"></script>
<script>
    console.log('from iparams.html');

    function getValueFromElement(elementId){
        const element = document.getElementById(elementId);
        const value = element.value?.trim();
        if(!value){
            toast.trigger({type:'error', content: "Error in postConfigs"});
            return
        }
        return value
    }
   

    function getElementUsingId(id){
        const element = document.getElementById(id);
        if(!element){
            toast.trigger({type:'error', content: "Error in getConfigs"});
            return 
        }
        return element
    }
    // let base_url;
    // let access_token;

    function postConfigs(){
    const login_email = login_email.value.trim();
    const login_password = login_password.value.trim();
    const tab2_domain = getValueFromElement("tab2-url");
    const tab2_apikey = getValueFromElement("tab2-api");
    const tab2_connection_name = getValueFromElement("tab2-connection-name");
    const tab3_domain = getValueFromElement("tab3-url");
    const tab3_apikey = getValueFromElement("tab3-api");
    const tab3_connection_name = getValueFromElement("tab3-connection-name");
    return {
        email:login_email,
        password:login_password,
        tab2_domain,
        tab2_apikey,
        tab2_connection_name,
        tab3_domain,
        tab3_apikey,
        tab3_connection_name 
        // base_url,
        // access_token // access_token variable gets value once the user is signed up or logged in successfully
    }
    }

    function getConfigs(iparams){
        generateFields('base_url', 'freshservice');
        generateFields('base_url', 'ukg');
        login_email.value = iparams.login_email;
        login_password.value = iparams.login_password;
        getElementUsingId("tab2-url").value = iparams.tab2_domain ;
        getElementUsingId("tab2-api").value = iparams.tab2_apikey ;
        getElementUsingId("tab2-connection-name").value = iparams.tab2_connection_name ;
        getElementUsingId("tab3-url").value = iparams.tab3_url ;
        getElementUsingId("tab3-api").value = iparams.tab3_apikey ;
        getElementUsingId("tab2-connection-name").value = iparams.tab3_connection_name ;
    }

    </script>
    <!-- crayons -->
    <script type="module"
        src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.esm.js">
    </script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.js"></script>

</body>

</html>